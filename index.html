<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="O0v0o : ">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>o0v0o</title>

	<script src="http://github.com/gamesys/moonshine/vm/moonshine.min.js"></script>
	<script src="http://github.com/gamesys/moonshine/extensions/DOMAPI/DOMAPI.moonshine.js"></script>
	<script src="http://github.com/gamesys/moonshine/distillery/distillery.moonshine.js"></script>
	<script src="http://github.com/gamesys/moonshine/extensions/luac/luac.moonshine.js"></script>
	<script>
		var vm = new shine.VM(shine.DOMAPI)


	function run(code){
		compile(code, function(err, bc){
			if(err){
				window.alert("Compile error!")
			}else{
				vm.load(bc)
			}
		});
	}
	function compile (code, callback) {
		//if ('onLine' in navigator && !navigator.onLine) {
			compileOffline(code, callback);
		//} else {
			//compileOnline(code, callback);
		//}
	}




	function compileOnline (code, callback) {
		ui.status.textContent = 'Compiling...';

		var body = shine.utils.get.toString().replace(/\/\/.*?\n/g, '').replace(/\n/g, '/* nl */').match(/{(.*)}/)[1],
			data = new FormData(),
			post;
		body = body.replace('GET', 'POST').replace('shine.EMPTY_OBJ', 'postData').replace(/\/\* nl \*\//g, '\n');
		post = new Function('url', 'postData', 'success', 'error', body);
		data.append('lua', code);

		function success (data) {
			ui.status.textContent
			=
			'';

			if (data.error) {
				callback(data.details);
			}else {
				callback(undefined, JSON.parse(data));
			}
		}

		function error () {
			compileOffline(code,
			callback);
		}

	post('http://distillery.moonshinejs.org', data, success, error);
	}

	</script>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/o0V0o">View on GitHub</a>

          <h1 id="project_title">O0v0o</h1>
          <h2 id="project_tagline"></h2>

        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h3>
<a name="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages"><span class="octicon octicon-link"></span></a>Welcome to GitHub Pages.</h3>
		<canvas id="Canvas" width="300" height="150"></canvas>
      </section>
    </div>
	
    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
